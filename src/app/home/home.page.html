<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Dynamic Forms
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Dynamic Forms</ion-title>
    </ion-toolbar>
  </ion-header>

  <form [formGroup]="orderForm" (ngSubmit)="onSubmit()">
    <ion-grid fixed>
      <div formArrayName="items" *ngFor="let item of orderFormControl.controls; let i = index;let last = last;">
        <div [formGroupName]="i">
          <ion-row>
            <ion-col size="12">
              <ion-item fill="outline">
                <ion-label position="floating">Name <span style="color: red;">*</span></ion-label>
                <ion-input formControlName="name" type="text"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="12">
              <ion-item fill="outline">
                <ion-label position="floating">E-Mail <span style="color: red;">*</span></ion-label>
                <ion-input formControlName="email" type="text"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="12">
              <ion-item fill="outline">
                <ion-label position="floating">Address <span style="color: red;">*</span></ion-label>
                <ion-input formControlName="address" type="text"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="12">
              <ion-item fill="outline">
                <ion-label position="floating">Phone <span style="color: red;">*</span></ion-label>
                <ion-input formControlName="phone" type="text"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="6">
              <ion-button (click)="removeItem(i)" color="danger">
                <ion-icon slot="start" name="trash"></ion-icon>
                Remove Item
              </ion-button>
            </ion-col>
          </ion-row>
        </div>
      </div>
      <ion-row>
        <ion-col size="12">
          <ion-button (click)="addItem()">
            <ion-icon slot="start" name="add"></ion-icon>
            Add Item
          </ion-button>
        </ion-col>
        <ion-col size="12" *ngIf="items.value.length>0">
          <ion-button (click)="onSubmit()" [disabled]="items.invalid" >
            Submit
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
